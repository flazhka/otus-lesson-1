# DHCP, PXE_Настройка PXE сервера для автоматической установки

#### Домашнее задание: 
1. Следуя шагам из документа https://docs.centos.org/en-US/8-docs/advanced-install/assembly_preparing-for-a-network-install  установить и настроить загрузку по сети для дистрибутива CentOS 8.  
В качестве шаблона воспользуйтесь репозиторием https://github.com/nixuser/virtlab/tree/main/centos_pxe 
2. Поменять установку из репозитория NFS на установку из репозитория HTTP.
3. Настроить автоматическую установку для созданного kickstart файла (*) Файл загружается по HTTP.

#### Решение: 

В данном задание необходимо настроить сервер PXE, на котором плднят Web-сервер Apache, TFTP-сервер и DHCP-сервер. Вторая виртуальная машина будет выступать в роли pxe-клиента. Все настройки сделаны согласно методички.

PXE (Preboot eXecution Environment) — это набор протоколов, которые позволяют загрузить хост из сети.

Для PXE требуется:  
- Со стороны сервера:  
DHCP-сервер   
TFTP-сервер  

- Со стороны клиента:  
Cетевая карта(PXE)  

TFTP (Trivial File Transfer Protocol) — простой протокол передачи файлов, используется главным образом для первоначальной загрузки бездисковых рабочих станций. Основная задача протокола TFTP — отправка указанных файлов клиенту.

DHCP (Dynamic Host Configuration Protocol) — протокол динамической настройки узла, позволяет сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP. 

Настройка PXE-сервера будет выполнена через ansible playbook. 

В процессе подготовки сервера:
- Установленна временная зона
- Синхронизировано точное время
- Установленны репозитории
- Установлены по vim, wget, httpd, tftp-server, dhcp-server
- Загружен установочный образ ос

И соответственно примененены настройки Apache, TFTF-Server, DHCP-Server.  


После загрузки виртуальной машины с pxe-клиентом мы можем наблюдать, что vagrant не может подключится к ней. В консоли vitualbox, мы видим, что начнётся автоматическая установка скачанного образа - CentOS-8.4 в автоматическом режиме, из заранее подготовленного файла kickstart.

Deploy:  

Меню загрузки:
![Screenshot1](/Lab20/screenshots/1.png?raw=true "Screenshot1")

Далее выполняем выключение виртуальной машины, изменяем в настроках виртуальной машины загрузку с Network на Hard Disk и выполняем запуск. 
Логинимся под root и смотрим версию OC.
![Screenshot2](/Lab20/screenshots/2.png?raw=true "Screenshot2")
